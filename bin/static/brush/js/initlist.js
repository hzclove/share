var showlog=true;var url=location.search;var theRequest=AnalyserUrl(url,true);var subjectid=theRequest.subjectid;$.ajax({type:"GET",url:"http://share.kdzikao.com/brush/doing.page",data:{subjectId:subjectid},dataType:"json",success:function(A){AnalysSubject(A);showfirst()},error:function(A){console.log("error");location.href="null.html"}});function showfirst(){}function AnalysLatex(A){var C='"math"';var B="$$$";A=A.replace(/\$\$\$\\\[/g,"<div class="+C+">"+B);A=A.replace(/\\\]\#\#\#/g,B+"</div>");A=A.replace(/\$\$\$/g,"<div class="+C+">"+B);A=A.replace(/\#\#\#/g,B+"</div>");return A}function splitImg(D){D=D.replace(/\n/g,"<br>");var B=D.split("[pic:");var F="";for(var A=0;A<B.length;A++){if(B[A].indexOf("http:")==0){var E=B[A].indexOf("]");var C=B[A].substr(0,E);C="<br><img src="+C+" width=100%><br>";F=F+C+B[A].substr(E+1,B[A].length)}else{F=F+B[A]}}return F}function AnalysSubject(data){try{mylog("data",eval(data));var objlist=eval(data.exercises);mylog("objlist",objlist);mylog("objlist.length",objlist.length)}catch(e){location.href="null.html"}for(var i=0;i<objlist.length;i++){var oli=$("<li></li>");oli.addClass("itemli swiper-slide");if(i==0){oli.addClass("swiper-slide-active")}if(i==1){oli.addClass("swiper-slide-next")}$("#subject").append(oli);if(!(objlist[i].kpointDetail==undefined)){var zsdname=$("<div></div>");zsdname.addClass("stem zsdname bg-graylight f16");zsdname.appendTo(oli);zsdname.html(objlist[i].kpointDetail.kpoint.sn+"&nbsp;&nbsp;"+objlist[i].kpointDetail.kpoint.name)}var testtype=$("<div></div>");testtype.appendTo(oli);testtype.addClass("color9 plr1 bg-graylight testtype");var subtype=$("<span></span>");subtype.html(objlist[i].category);subtype.appendTo(testtype);subtype.addClass("subtype");var subno=$("<span>　"+(i+1)+"题/"+objlist.length+"题</span>");subno.appendTo(testtype);var sublabels=$("<div></div>");sublabels.addClass("sublabels bg-graylight");sublabels.appendTo(oli);var strs=objlist[i].labels.splice(",");for(var s=0;s<strs.length;s++){if(strs[s].indexOf("真题")>=0){var zt=$("<span></span>");zt.html("真题");zt.addClass("zt");zt.appendTo(sublabels)}else{if(strs[s].indexOf("模拟")>=0){var mn=$("<span></span>");mn.html("模拟");mn.addClass("mn");mn.appendTo(sublabels)}else{if(strs[s].indexOf("练习")>=0){var lx=$("<span></span>");lx.addClass("lx");lx.html("练习");lx.appendTo(sublabels)}else{if(strs[s].indexOf("预测")>=0){var yc=$("<span></span>");yc.html("预测");yc.addClass("yc");yc.appendTo(sublabels)}}}}}var stem=$("<div></div>");stem.addClass("stem bg-graylight");stem.appendTo(oli);stem.html(AnalysLatex(objlist[i].stem.text));if(!(objlist[i].stem.figure==undefined||objlist[i].stem.figure[0]=="")){var str=objlist[i].stem.figure[0];var strs=str.split(";");for(var stemfig=0;stemfig<strs.length;stemfig++){var img=$("<img/>");img.attr("width","100%");img.attr("src",strs[stemfig]);img.appendTo(oli)}}var optionlist=$("<div></div>");optionlist.addClass("optionlist plr1 bg-graylight");optionlist.appendTo(oli);var optionstr=objlist[i].options;for(var op=0;op<optionstr.length;op++){var p=$("<p></p>");p.addClass("idp");p.appendTo(optionlist);var idspan=$("<span></span>");idspan.html(objlist[i].options[op].id);idspan.addClass("idspan");idspan.appendTo(p);var content=$("<span></span>");content.html(AnalysLatex(objlist[i].options[op].content));content.appendTo(p);var yes=$("<i></i>");yes.addClass("yes");yes.appendTo(p);var no=$("<i></i>");no.addClass("no");no.appendTo(p);if(!(objlist[i].options[op].figure==undefined||objlist[i].options[op].figure[0]=="")){var str=objlist[i].options[op].figure[0];var strs=str.split(";");for(var fig=0;fig<strs.length;fig++){var img=$("<img/>");img.attr("width","100%");img.attr("src",strs[fig]);img.appendTo(p)}}}var rightAnswer=$("<div></div>");rightAnswer.html(objlist[i].correctAnswer);rightAnswer.addClass("rightAnswer");rightAnswer.appendTo(oli);var errordiv=$("<div></div>");errordiv.addClass("mt bg-graylight");errordiv.appendTo(oli);var errorImg=$("<img />");errorImg.attr("src","../img/error.png");errorImg.attr("width","100%");errorImg.addClass("errorimg");errorImg.appendTo(errordiv);var rightImg=$("<img />");rightImg.attr("src","../img/right.png");rightImg.attr("width","100%");rightImg.addClass("rightimg");rightImg.appendTo(errordiv);var commt_tmjj=$("<div></div>");commt_tmjj.addClass("comm bg-graylight");commt_tmjj.appendTo(oli);var title_tmjj=$("<div></div>");title_tmjj.addClass("title clearfix f16 color-greenlight bold");title_tmjj.appendTo(commt_tmjj);var icon_tmjj=$("<i></i>");icon_tmjj.addClass("tmjj fl");icon_tmjj.appendTo(title_tmjj);var span_tmjj=$("<span></span>");span_tmjj.html("题目讲解");span_tmjj.appendTo(title_tmjj);var p_tmjj=$("<div></div>");p_tmjj.addClass("color-gray f16 math");p_tmjj.html(AnalysLatex(objlist[i].explain.text));p_tmjj.appendTo(commt_tmjj);if(!(objlist[i].explain.figure==undefined||objlist[i].explain.figure[0]=="")){var str=objlist[i].explain.figure[0];var strs=str.split(";");for(var fig=0;fig<strs.length;fig++){var img=$("<img/>");img.attr("width","100%");img.attr("src",strs[fig]);img.appendTo(commt_tmjj)}}var commt_zsd=$("<div></div>");commt_zsd.addClass("comm bg-graylight");commt_zsd.appendTo(oli);var title_zsd=$("<div></div>");title_zsd.addClass("title clearfix f16 color-blue bold");title_zsd.appendTo(commt_zsd);var icon_zsd=$("<i></i>");icon_zsd.addClass("zsd fl");icon_zsd.appendTo(title_zsd);var span_zsd=$("<span></span>");span_zsd.html("知识点");span_zsd.appendTo(title_zsd);var subname=$("<div></div>");subname.addClass("clearfix subname color-black f16");subname.appendTo(commt_zsd);var span_subname=$("<span></span>");span_subname.appendTo(subname);span_subname.html(AnalysLatex(objlist[i].kpointDetail.kpoint.name));if(objlist[i].kpointDetail.graspRequire!=""){var span_tit=$("<span></span>");span_tit.appendTo(subname);span_tit.addClass("fr span-tit");span_tit.html(objlist[i].kpointDetail.graspRequire)}var p_zsd=$("<div></div>");p_zsd.appendTo(commt_zsd);p_zsd.addClass("color-gray f16 math");p_zsd.html(splitImg(AnalysLatex(objlist[i].kpointDetail.explainText)));var commt_tj=$("<div></div>");commt_tj.addClass("comm bg-graylight");commt_tj.appendTo(oli);var title_tj=$("<div></div>");title_tj.addClass("title clearfix f16 color-orange bold");title_tj.appendTo(commt_tj);var icon_zsd=$("<i></i>");icon_zsd.addClass("tj fl");icon_zsd.appendTo(title_tj);var span_tj=$("<span></span>");span_tj.html("统计");span_tj.appendTo(title_tj);var situationlist=$("<ul></ul>");situationlist.addClass("situationlist clearfix color-gray tc");situationlist.appendTo(commt_tj);var sitli_one=$("<li></li>");sitli_one.appendTo(situationlist);var sitli_one_span=$("<span></span>");sitli_one_span.html("错误率");sitli_one_span.appendTo(sitli_one);var sitli_one_p=$("<p></p>");sitli_one_p.html((objlist[i].kpointDetail.errorRate*100).toFixed(2)+"%");sitli_one_p.addClass("color-green");sitli_one_p.appendTo(sitli_one);var sitli_one_p_totalNum=$("<a></a>");sitli_one_p_totalNum.html(objlist[i].errorRate.totalNum);sitli_one_p_totalNum.addClass("totalNum");sitli_one_p_totalNum.css("display","none");sitli_one_p_totalNum.appendTo(sitli_one);var sitli_one_p_errorNum=$("<a></a>");sitli_one_p_errorNum.html(objlist[i].errorRate.errorNum);sitli_one_p_errorNum.addClass("errorNum");sitli_one_p_errorNum.css("display","none");sitli_one_p_errorNum.appendTo(sitli_one);var sitli_two=$("<li></li>");sitli_two.appendTo(situationlist);var sitli_two_span=$("<span></span>");sitli_two_span.html("我的错误率");sitli_two_span.appendTo(sitli_two);var sitli_two_p=$("<p></p>");sitli_two_p.addClass("color-red myErrorRate");sitli_two_p.html("100%");sitli_two_p.appendTo(sitli_two);var sitli_three=$("<li></li>");sitli_three.appendTo(situationlist);var sitli_three_span=$("<span></span>");sitli_three_span.html("知识点掌握");sitli_three_span.appendTo(sitli_three);var sitli_three_p=$("<p></p>");sitli_three_p.appendTo(sitli_three);var graspLevel=((objlist[i].kpointDetail.graspLevel).toFixed(0));for(var ga=1;ga<=5;ga++){var icon_star=$("<i></i>");icon_star.addClass("star");if(ga<=graspLevel){icon_star.addClass("star-blue")}sitli_three_p.append(icon_star)}}}function mylog(A,B){if(!showlog){return}var A=A+":"};